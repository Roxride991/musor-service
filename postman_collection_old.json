{
	"info": {
		"_postman_id": "musor-service-api",
		"name": "Musor Service API",
		"description": "Коллекция для тестирования API сервиса вывоза мусора",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Auth",
			"item": [
				{
					"name": "Регистрация (CLIENT)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"phone\": \"+79051234567\",\n    \"name\": \"Иван Иванов\",\n    \"role\": \"CLIENT\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/register",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "register"]
						}
					},
					"response": []
				},
				{
					"name": "Регистрация (COURIER)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"phone\": \"+79059876543\",\n    \"name\": \"Петр Петров\",\n    \"role\": \"COURIER\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/register",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "register"]
						}
					},
					"response": []
				},
				{
					"name": "Вход",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"phone\": \"+79051234567\",\n    \"code\": \"0000\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/login",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "login"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Zones",
			"item": [
				{
					"name": "Получить активную зону",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/zones/active",
							"host": ["{{baseUrl}}"],
							"path": ["api", "zones", "active"]
						}
					},
					"response": []
				},
				{
					"name": "Создать/установить активную зону (ADMIN)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-User-Id",
								"value": "{{adminUserId}}",
								"description": "ID администратора"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Оренбург\",\n    \"coordinates\": [\n        {\"lat\": 51.7687, \"lng\": 55.1017},\n        {\"lat\": 51.7887, \"lng\": 55.1017},\n        {\"lat\": 51.7887, \"lng\": 55.1217},\n        {\"lat\": 51.7687, \"lng\": 55.1217}\n    ]\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/zones",
							"host": ["{{baseUrl}}"],
							"path": ["api", "zones"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Orders",
			"item": [
				{
					"name": "Создать разовой заказ (CLIENT)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-User-Id",
								"value": "{{clientUserId}}",
								"description": "ID клиента"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"address\": \"г. Оренбург, ул. Ленина, д. 1\",\n    \"pickupTime\": \"2025-11-06T14:00:00+03:00\",\n    \"comment\": \"В подъезд\",\n    \"lat\": 51.7687,\n    \"lng\": 55.1017\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/orders",
							"host": ["{{baseUrl}}"],
							"path": ["api", "orders"]
						}
					},
					"response": []
				},
				{
					"name": "Создать заказ по подписке (CLIENT)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-User-Id",
								"value": "{{clientUserId}}",
								"description": "ID клиента"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"address\": \"г. Оренбург, ул. Ленина, д. 2\",\n    \"pickupTime\": \"2025-11-07T10:00:00+03:00\",\n    \"comment\": \"У двери\",\n    \"subscriptionId\": {{subscriptionId}},\n    \"lat\": 51.7687,\n    \"lng\": 55.1017\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/orders",
							"host": ["{{baseUrl}}"],
							"path": ["api", "orders"]
						}
					},
					"response": []
				},
				{
					"name": "Получить список заказов (CLIENT)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-User-Id",
								"value": "{{clientUserId}}",
								"description": "ID клиента"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/orders",
							"host": ["{{baseUrl}}"],
							"path": ["api", "orders"]
						}
					},
					"response": []
				},
				{
					"name": "Получить список заказов (COURIER)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-User-Id",
								"value": "{{courierUserId}}",
								"description": "ID курьера"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/orders",
							"host": ["{{baseUrl}}"],
							"path": ["api", "orders"]
						}
					},
					"response": []
				},
				{
					"name": "Получить список заказов (ADMIN)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-User-Id",
								"value": "{{adminUserId}}",
								"description": "ID администратора"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/orders",
							"host": ["{{baseUrl}}"],
							"path": ["api", "orders"]
						}
					},
					"response": []
				},
				{
					"name": "Получить заказ по ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-User-Id",
								"value": "{{clientUserId}}",
								"description": "ID пользователя"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/orders/{{orderId}}",
							"host": ["{{baseUrl}}"],
							"path": ["api", "orders", "{{orderId}}"]
						}
					},
					"response": []
				},
				{
					"name": "Отменить заказ (CLIENT)",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "X-User-Id",
								"value": "{{clientUserId}}",
								"description": "ID клиента"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/orders/{{orderId}}/cancel",
							"host": ["{{baseUrl}}"],
							"path": ["api", "orders", "{{orderId}}", "cancel"]
						}
					},
					"response": []
				},
				{
					"name": "Принять заказ (COURIER)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-User-Id",
								"value": "{{courierUserId}}",
								"description": "ID курьера"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/orders/{{orderId}}/accept",
							"host": ["{{baseUrl}}"],
							"path": ["api", "orders", "{{orderId}}", "accept"]
						}
					},
					"response": []
				},
				{
					"name": "Обновить статус заказа (COURIER)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-User-Id",
								"value": "{{courierUserId}}",
								"description": "ID курьера"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"status\": \"ON_THE_WAY\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/orders/{{orderId}}/status",
							"host": ["{{baseUrl}}"],
							"path": ["api", "orders", "{{orderId}}", "status"]
						},
						"description": "Доступные статусы: ON_THE_WAY, PICKED_UP, COMPLETED, CANCELLED_BY_COURIER"
					},
					"response": []
				},
				{
					"name": "Обновить статус заказа (ADMIN)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-User-Id",
								"value": "{{adminUserId}}",
								"description": "ID администратора"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"status\": \"COMPLETED\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/orders/admin/{{orderId}}/status",
							"host": ["{{baseUrl}}"],
							"path": ["api", "orders", "admin", "{{orderId}}", "status"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Subscriptions",
			"item": [
				{
					"name": "Создать подписку (CLIENT)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-User-Id",
								"value": "{{clientUserId}}",
								"description": "ID клиента"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"plan\": \"WEEKLY\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/subscriptions",
							"host": ["{{baseUrl}}"],
							"path": ["api", "subscriptions"]
						},
						"description": "Планы: WEEKLY, MONTHLY"
					},
					"response": []
				},
				{
					"name": "Получить все подписки (CLIENT)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-User-Id",
								"value": "{{clientUserId}}",
								"description": "ID клиента"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/subscriptions",
							"host": ["{{baseUrl}}"],
							"path": ["api", "subscriptions"]
						}
					},
					"response": []
				},
				{
					"name": "Отменить подписку (CLIENT)",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "X-User-Id",
								"value": "{{clientUserId}}",
								"description": "ID клиента"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/subscriptions/{{subscriptionId}}",
							"host": ["{{baseUrl}}"],
							"path": ["api", "subscriptions", "{{subscriptionId}}"]
						}
					},
					"response": []
				},
				{
					"name": "Приостановить подписку (CLIENT)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "X-User-Id",
								"value": "{{clientUserId}}",
								"description": "ID клиента"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/subscriptions/{{subscriptionId}}/pause",
							"host": ["{{baseUrl}}"],
							"path": ["api", "subscriptions", "{{subscriptionId}}", "pause"]
						}
					},
					"response": []
				},
				{
					"name": "Возобновить подписку (CLIENT)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "X-User-Id",
								"value": "{{clientUserId}}",
								"description": "ID клиента"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/subscriptions/{{subscriptionId}}/resume",
							"host": ["{{baseUrl}}"],
							"path": ["api", "subscriptions", "{{subscriptionId}}", "resume"]
						}
					},
					"response": []
				}
			]
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:8080",
			"type": "string"
		},
		{
			"key": "clientUserId",
			"value": "1",
			"type": "string"
		},
		{
			"key": "courierUserId",
			"value": "2",
			"type": "string"
		},
		{
			"key": "adminUserId",
			"value": "3",
			"type": "string"
		},
		{
			"key": "orderId",
			"value": "1",
			"type": "string"
		},
		{
			"key": "subscriptionId",
			"value": "1",
			"type": "string"
		}
	]
}

