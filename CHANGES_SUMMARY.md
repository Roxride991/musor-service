# –°–≤–æ–¥–∫–∞ –≤–Ω–µ—Å–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –°–æ–∑–¥–∞–Ω UserController
**–§–∞–π–ª:** `src/main/java/com/example/core/controller/UserController.java`

**–ù–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
- `GET /api/users/me` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PATCH /api/users/me/name` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É –ø–æ–ª—É—á–∞—Ç—å –∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ.

### 2. –†–∞–∑–¥–µ–ª–µ–Ω—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∑–∞–∫–∞–∑–æ–≤ –¥–ª—è –∫—É—Ä—å–µ—Ä–∞
**–§–∞–π–ª:** `src/main/java/com/example/core/controller/OrderController.java`

**–ù–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
- `GET /api/orders/available` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ (–¥–ª—è –∫—É—Ä—å–µ—Ä–∞)
- `GET /api/orders/active` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ –∫—É—Ä—å–µ—Ä–∞

**–û–ø–∏—Å–∞–Ω–∏–µ:** –¢–µ–ø–µ—Ä—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∞—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã–µ –∏ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–∫–∞–∑—ã –æ—Ç–¥–µ–ª—å–Ω–æ, —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É –∫—É—Ä—å–µ—Ä–∞.

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
**–§–∞–π–ª—ã:**
- `src/main/java/com/example/core/dto/RegisterRequest.java`
- `src/main/java/com/example/core/dto/UpdateNameRequest.java`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É: `^[–∞-—è–ê-–Ø—ë–Åa-zA-Z\\s\\-]{2,50}$`
- –ò–º—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 2 –¥–æ 50 —Å–∏–º–≤–æ–ª–æ–≤
- –†–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã (—Ä—É—Å—Å–∫–∏–µ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ), –ø—Ä–æ–±–µ–ª—ã –∏ –¥–µ—Ñ–∏—Å

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –ø–æ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏–º–µ–Ω–∏.

### 4. –î–æ–±–∞–≤–ª–µ–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫
**–§–∞–π–ª—ã:**
- `src/main/java/com/example/core/controller/SubscriptionController.java`
- `src/main/java/com/example/core/service/SubscriptionService.java`

**–ù–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç:**
- `GET /api/subscriptions/active` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ù–æ–≤—ã–π –º–µ—Ç–æ–¥ —Å–µ—Ä–≤–∏—Å–∞:**
- `getActiveSubscriptionsForUser(User user)` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –∏ –Ω–µ –∏—Å—Ç–µ–∫—à–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É –ø–æ–ª—É—á–∞—Ç—å —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏ –¥–ª—è –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞.

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

- **–°–æ–∑–¥–∞–Ω–æ —Ñ–∞–π–ª–æ–≤:** 1 (UserController)
- **–ò–∑–º–µ–Ω–µ–Ω–æ —Ñ–∞–π–ª–æ–≤:** 4
- **–î–æ–±–∞–≤–ª–µ–Ω–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:** 4
- **–£–ª—É—á—à–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è:** 2 DTO

---

## üîÑ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:
- –°—Ç–∞—Ä—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç `GET /api/orders` –¥–ª—è –∫—É—Ä—å–µ—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫)
- –°—Ç–∞—Ä—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç `GET /api/subscriptions` –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ –ø–æ–¥–ø–∏—Å–∫–∏)
- –ù–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —è–≤–ª—è—é—Ç—Å—è –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º, –∞ –Ω–µ –∑–∞–º–µ–Ω–æ–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
1. **–°–æ–∑–¥–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ OTP –∫–æ–¥–∞**
   - `POST /api/auth/send-code` - –æ—Ç–ø—Ä–∞–≤–∫–∞ OTP –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SMS-—Å–µ—Ä–≤–∏—Å–æ–º
   - –•—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–¥–æ–≤ –≤ Redis –∏–ª–∏ –ë–î —Å TTL

2. **–î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–ª—è –∫—É—Ä—å–µ—Ä–∞**
   - `GET /api/orders/stats` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
3. **–£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫**
   - –°–æ–∑–¥–∞—Ç—å `@ControllerAdvice` –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
   - –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤ –æ–± –æ—à–∏–±–∫–∞—Ö

4. **–î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤–∞–∂–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞, –ø—Ä–∏–Ω—è—Ç–∏–µ –∑–∞–∫–∞–∑–∞, –≤—Ö–æ–¥)
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:
1. ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`GET /api/users/me`)
2. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–º–µ–Ω–∏ (`PATCH /api/users/me/name`)
3. ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ (`GET /api/orders/available`)
4. ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ (`GET /api/orders/active`)
5. ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫ (`GET /api/subscriptions/active`)
6. ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–º–µ–Ω–∏ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –∏–º–µ–Ω)

