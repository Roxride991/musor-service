# ‚úÖ –û—Ç—á–µ—Ç –æ –ø—Ä–æ–≤–µ—Ä–∫–µ –ª–æ–≥–∏–∫–∏ –≥–µ–æ–∫–æ–¥–∏–Ω–≥–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–æ–Ω

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–Ω–æ–≥–æ flow —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞

### –®–∞–≥ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `POST /api/orders`

**–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:** `OrderController.createOrder()`

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç `CreateOrderRequest` —Å –ø–æ–ª—è–º–∏:
  - `address` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  - `pickupTime` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  - `comment` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - `lat` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - `lng` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - `subscriptionId` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ö–æ–¥:**
```java
@PostMapping
public ResponseEntity<OrderResponse> createOrder(
    @AuthenticationPrincipal User currentUser,
    @Valid @RequestBody CreateOrderRequest request)
```

---

### –®–∞–≥ 2: –í—ã–∑–æ–≤ —Å–µ—Ä–≤–∏—Å–∞

**–°–µ—Ä–≤–∏—Å:** `OrderService.createOrder()`

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
  - `client` (User)
  - `address` (String)
  - `pickupTime` (OffsetDateTime)
  - `comment` (String)
  - `lat` (Double, –º–æ–∂–µ—Ç –±—ã—Ç—å null)
  - `lng` (Double, –º–æ–∂–µ—Ç –±—ã—Ç—å null)
  - `subscription` (Subscription, –º–æ–∂–µ—Ç –±—ã—Ç—å null)

**–ö–æ–¥:**
```java
order = orderService.createOrder(
    currentUser,
    request.getAddress(),
    request.getPickupTime(),
    request.getComment(),
    request.getLat(),  // –ú–æ–∂–µ—Ç –±—ã—Ç—å null
    request.getLng(),  // –ú–æ–∂–µ—Ç –±—ã—Ç—å null
    subscription
);
```

---

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–æ–Ω—ã –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è

**–ú–µ—Ç–æ–¥:** `OrderService.isAddressInServiceZone(address, lat, lng)`

**–õ–æ–≥–∏–∫–∞:**

```java
private boolean isAddressInServiceZone(String address, Double lat, Double lng) {
    // 1. –ü–æ–ª—É—á–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é –∑–æ–Ω—É
    var activeZone = zoneRepository.findFirstByActiveTrue();
    if (activeZone.isEmpty()) {
        throw new IllegalArgumentException("–ê–∫—Ç–∏–≤–Ω–∞—è –∑–æ–Ω–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞...");
    }
    
    // 2. –ü–æ–ª—É—á–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ç–æ—á–∫–∏
    ServiceZone.Coordinate point = (lat != null && lng != null)
        ? new ServiceZone.Coordinate(lat, lng)  // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
        : geocodingService.getCoordinates(address);  // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
    
    // 3. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∑–æ–Ω—ã –≤ –ø–æ–ª–∏–≥–æ–Ω
    String json = objectMapper.writeValueAsString(zone.getCoordinates());
    var polygon = objectMapper.readValue(json, new TypeReference<List<ServiceZone.Coordinate>>(){});
    
    // 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —Ç–æ—á–∫–∞ –≤ –ø–æ–ª–∏–≥–æ–Ω–µ
    boolean isInZone = geoUtils.isPointInPolygon(point.getLat(), point.getLng(), polygon);
    
    return isInZone;
}
```

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ –ï—Å–ª–∏ `lat` –∏ `lng` –ø–µ—Ä–µ–¥–∞–Ω—ã ‚Üí –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é
- ‚úÖ –ï—Å–ª–∏ `lat` –∏ `lng` –ù–ï –ø–µ—Ä–µ–¥–∞–Ω—ã ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `geocodingService.getCoordinates(address)`
- ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–∞—è –∑–æ–Ω–∞ –∏–∑ –ë–î
- ‚úÖ –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∑–æ–Ω—ã –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ –ø–æ–ª–∏–≥–æ–Ω
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–æ—á–∫–∏ –≤ –ø–æ–ª–∏–≥–æ–Ω —á–µ—Ä–µ–∑ `GeoUtils.isPointInPolygon()`

---

### –®–∞–≥ 4: –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã

**–°–µ—Ä–≤–∏—Å:** `GeocodingService.getCoordinates(address)`

**–õ–æ–≥–∏–∫–∞:**

```java
public ServiceZone.Coordinate getCoordinates(String address) {
    // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    if (!geocoderEnabled || yandexApiKey == null || yandexApiKey.trim().isEmpty()) {
        // Fallback –Ω–∞ –∑–∞–≥–ª—É—à–∫—É
        return new ServiceZone.Coordinate(ORENBURG_CENTER_LAT, ORENBURG_CENTER_LNG);
    }
    
    // 2. –ó–∞–ø—Ä–æ—Å –∫ –Ø–Ω–¥–µ–∫—Å.–ì–µ–æ–∫–æ–¥–µ—Ä—É
    try {
        return getCoordinatesFromYandex(address);
    } catch (Exception e) {
        // Fallback –Ω–∞ –∑–∞–≥–ª—É—à–∫—É –ø—Ä–∏ –æ—à–∏–±–∫–µ
        return new ServiceZone.Coordinate(ORENBURG_CENTER_LAT, ORENBURG_CENTER_LNG);
    }
}
```

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, –≤–∫–ª—é—á–µ–Ω –ª–∏ –≥–µ–æ–∫–æ–¥–µ—Ä –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ª–∏ API –∫–ª—é—á
- ‚úÖ –ï—Å–ª–∏ –¥–∞ ‚Üí –∑–∞–ø—Ä–æ—Å –∫ –Ø–Ω–¥–µ–∫—Å.–ì–µ–æ–∫–æ–¥–µ—Ä—É
- ‚úÖ –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí fallback –Ω–∞ –∑–∞–≥–ª—É—à–∫—É (—Ü–µ–Ω—Ç—Ä –û—Ä–µ–Ω–±—É—Ä–≥–∞)
- ‚úÖ –ü—Ä–∏ –æ—à–∏–±–∫–µ ‚Üí fallback –Ω–∞ –∑–∞–≥–ª—É—à–∫—É

**–ó–∞–ø—Ä–æ—Å –∫ –Ø–Ω–¥–µ–∫—Å.–ì–µ–æ–∫–æ–¥–µ—Ä—É:**
```java
URI uri = UriComponentsBuilder.fromHttpUrl("https://geocode-maps.yandex.ru/1.x")
    .queryParam("apikey", yandexApiKey)
    .queryParam("geocode", address)
    .queryParam("format", "json")
    .queryParam("results", 1)
    .build()
    .toUri();
```

**–ü–∞—Ä—Å–∏–Ω–≥ –æ—Ç–≤–µ—Ç–∞:**
```java
// –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞: "lng lat" (–¥–æ–ª–≥–æ—Ç–∞ —à–∏—Ä–æ—Ç–∞)
String pos = geoObject.path("Point").path("pos").asText();
String[] coords = pos.split(" ");
double lng = Double.parseDouble(coords[0]);
double lat = Double.parseDouble(coords[1]);
return new ServiceZone.Coordinate(lat, lng);
```

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π URL API
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –æ—Ç–≤–µ—Ç–∞ (—Ñ–æ—Ä–º–∞—Ç "lng lat")
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–∂–¥–µ–Ω–∏—è –≤ –ø–æ–ª–∏–≥–æ–Ω

**–ú–µ—Ç–æ–¥:** `GeoUtils.isPointInPolygon(lat, lng, polygon)`

**–ê–ª–≥–æ—Ä–∏—Ç–º:** Ray Casting

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ –ê–ª–≥–æ—Ä–∏—Ç–º Ray Casting —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `x=lng, y=lat`
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–º –ø–æ—Ä—è–¥–∫–æ–º –≤–µ—Ä—à–∏–Ω

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏–∫–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ó–∞–∫–∞–∑ —Å –∞–¥—Ä–µ—Å–æ–º (–±–µ–∑ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç)

```
1. POST /api/orders
   Body: {
     "address": "–û—Ä–µ–Ω–±—É—Ä–≥, —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 10",
     "pickupTime": "2025-01-20T14:00:00+03:00"
   }
   ‚Üì
2. OrderController.createOrder()
   ‚Üì
3. OrderService.createOrder(..., null, null, ...)
   ‚Üì
4. isAddressInServiceZone(address, null, null)
   ‚Üì
5. lat == null && lng == null ‚Üí geocodingService.getCoordinates(address)
   ‚Üì
6. GeocodingService.getCoordinates("–û—Ä–µ–Ω–±—É—Ä–≥, —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 10")
   ‚Üì
7. API –∫–ª—é—á –Ω–∞—Å—Ç—Ä–æ–µ–Ω ‚Üí –∑–∞–ø—Ä–æ—Å –∫ –Ø–Ω–¥–µ–∫—Å.–ì–µ–æ–∫–æ–¥–µ—Ä—É
   ‚Üì
8. –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä: lat=51.7687, lng=55.1017)
   ‚Üì
9. –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π –∑–æ–Ω—ã –∏–∑ –ë–î
   ‚Üì
10. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∑–æ–Ω—ã –≤ –ø–æ–ª–∏–≥–æ–Ω
   ‚Üì
11. GeoUtils.isPointInPolygon(51.7687, 55.1017, polygon)
   ‚Üì
12. –¢–æ—á–∫–∞ –≤ –ø–æ–ª–∏–≥–æ–Ω–µ?
    ‚îú‚îÄ –î–∞ ‚Üí –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω ‚úÖ
    ‚îî‚îÄ –ù–µ—Ç ‚Üí –û—à–∏–±–∫–∞ "–ê–¥—Ä–µ—Å –≤–Ω–µ –∑–æ–Ω—ã –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è" ‚ùå
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –õ–æ–≥–∏–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ó–∞–∫–∞–∑ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏

```
1. POST /api/orders
   Body: {
     "address": "–û—Ä–µ–Ω–±—É—Ä–≥, —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 10",
     "pickupTime": "2025-01-20T14:00:00+03:00",
     "lat": 51.7750,
     "lng": 55.1100
   }
   ‚Üì
2. OrderController.createOrder()
   ‚Üì
3. OrderService.createOrder(..., 51.7750, 55.1100, ...)
   ‚Üì
4. isAddressInServiceZone(address, 51.7750, 55.1100)
   ‚Üì
5. lat != null && lng != null ‚Üí new ServiceZone.Coordinate(51.7750, 55.1100)
   ‚Üì
6. –ì–µ–æ–∫–æ–¥–µ—Ä –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è (—ç–∫–æ–Ω–æ–º–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤)
   ‚Üì
7. –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π –∑–æ–Ω—ã –∏–∑ –ë–î
   ‚Üì
8. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∑–æ–Ω—ã –≤ –ø–æ–ª–∏–≥–æ–Ω
   ‚Üì
9. GeoUtils.isPointInPolygon(51.7750, 55.1100, polygon)
   ‚Üì
10. –¢–æ—á–∫–∞ –≤ –ø–æ–ª–∏–≥–æ–Ω–µ?
    ‚îú‚îÄ –î–∞ ‚Üí –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω ‚úÖ
    ‚îî‚îÄ –ù–µ—Ç ‚Üí –û—à–∏–±–∫–∞ "–ê–¥—Ä–µ—Å –≤–Ω–µ –∑–æ–Ω—ã –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è" ‚ùå
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –õ–æ–≥–∏–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è

---

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. application.yaml

**–ë—ã–ª–æ:**
```yaml
api-key: b7b06b36-4f6b-476c-808e-661ebd341f6a
```

**–°—Ç–∞–ª–æ:**
```yaml
api-key: ${YANDEX_GEOCODER_API_KEY:b7b06b36-4f6b-476c-808e-661ebd341f6a}
```

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä—è–º–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –∫–ª—é—á–∞ –≤ YAML –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ. –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è.

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### GeocodingService

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- ‚úÖ `RestTemplate` - –∏–Ω–∂–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `@RequiredArgsConstructor`
- ‚úÖ `ObjectMapper` - –∏–Ω–∂–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `@RequiredArgsConstructor`
- ‚úÖ `yandexApiKey` - –∏–Ω–∂–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `@Value`
- ‚úÖ `geocoderEnabled` - –∏–Ω–∂–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `@Value`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

### OrderService

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- ‚úÖ `OrderRepository`
- ‚úÖ `ServiceZoneRepository`
- ‚úÖ `GeocodingService`
- ‚úÖ `GeoUtils`
- ‚úÖ `ObjectMapper`
- ‚úÖ `PaymentService`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

---

## üß™ –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –¢–µ—Å—Ç 1: –ó–∞–∫–∞–∑ —Å –∞–¥—Ä–µ—Å–æ–º (–≥–µ–æ–∫–æ–¥–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç)

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```json
{
    "address": "–û—Ä–µ–Ω–±—É—Ä–≥, —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 10",
    "pickupTime": "2025-01-20T14:00:00+03:00"
}
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
1. –ê–¥—Ä–µ—Å –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å.–ì–µ–æ–∫–æ–¥–µ—Ä
2. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ –≤ –∑–æ–Ω—É
3. –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** ‚úÖ –õ–æ–≥–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –¢–µ—Å—Ç 2: –ó–∞–∫–∞–∑ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```json
{
    "address": "–û—Ä–µ–Ω–±—É—Ä–≥, —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 10",
    "pickupTime": "2025-01-20T14:00:00+03:00",
    "lat": 51.7750,
    "lng": 55.1100
}
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
1. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
2. –ì–µ–æ–∫–æ–¥–µ—Ä –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
3. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ –≤ –∑–æ–Ω—É
4. –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** ‚úÖ –õ–æ–≥–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –¢–µ—Å—Ç 3: –ê–¥—Ä–µ—Å –≤–Ω–µ –∑–æ–Ω—ã

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```json
{
    "address": "–ú–æ—Å–∫–≤–∞, —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 10",
    "pickupTime": "2025-01-20T14:00:00+03:00"
}
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
1. –ê–¥—Ä–µ—Å –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (–ú–æ—Å–∫–≤–∞)
2. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ –≤ –∑–æ–Ω—É (–û—Ä–µ–Ω–±—É—Ä–≥)
3. –¢–æ—á–∫–∞ –≤–Ω–µ –∑–æ–Ω—ã ‚Üí –æ—à–∏–±–∫–∞ "–ê–¥—Ä–µ—Å –≤–Ω–µ –∑–æ–Ω—ã –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è"

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** ‚úÖ –õ–æ–≥–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

1. ‚úÖ **–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã**
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ø–Ω–¥–µ–∫—Å.–ì–µ–æ–∫–æ–¥–µ—Ä–æ–º
   - Fallback –Ω–∞ –∑–∞–≥–ª—É—à–∫—É –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –æ—Ç–≤–µ—Ç–∞

2. ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–æ–Ω—ã –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è**
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π –∑–æ–Ω—ã –∏–∑ –ë–î
   - –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∑–æ–Ω—ã –≤ –ø–æ–ª–∏–≥–æ–Ω
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–æ—á–∫–∏ –≤ –ø–æ–ª–∏–≥–æ–Ω

3. ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
   - –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
   - Fallback –º–µ—Ö–∞–Ω–∏–∑–º
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

4. ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å**
   - –†–∞–±–æ—Ç–∞–µ—Ç —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –∏ –±–µ–∑ –Ω–∏—Ö
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### ‚ö†Ô∏è –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä—É—á–Ω—É—é:

1. **API –∫–ª—é—á –Ø–Ω–¥–µ–∫—Å.–ì–µ–æ–∫–æ–¥–µ—Ä–∞**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–ª—é—á –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤

2. **–ê–∫—Ç–∏–≤–Ω–∞—è –∑–æ–Ω–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–æ–Ω–∞ —Å–æ–∑–¥–∞–Ω–∞
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∑–æ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ

3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ —Å –∞–¥—Ä–µ—Å–æ–º
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∞–¥—Ä–µ—Å –≤–Ω–µ –∑–æ–Ω—ã

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. ‚úÖ **–í—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã** –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏
2. ‚úÖ **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á** –Ø–Ω–¥–µ–∫—Å.–ì–µ–æ–∫–æ–¥–µ—Ä–∞
3. ‚úÖ **–°–æ–∑–¥–∞–π—Ç–µ –∞–∫—Ç–∏–≤–Ω—É—é –∑–æ–Ω—É** –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
4. ‚úÖ **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

**–õ–æ–≥–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!** ‚úÖ

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ Postman.







